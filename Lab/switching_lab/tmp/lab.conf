#include "/vmm/bin/common.defs"
#include "/vmm/data/user_disks/vmxc/common.vmx.p3.defs"
#include "/vmm/data/user_disks/vptxc/common.evovptx.ardbeg.defs"
#include "/vmm/data/user_disks/vptxc/common.ardbeg.defs"
#undef gw_disk 
#define gw_disk basedisk "/vmm/data/user_disks/irzan/images/gw.qcow2";
#undef vjunos_switch_disk 
#define vjunos_switch_disk basedisk "/vmm/data/user_disks/irzan/images/vJunos-switch-25.4R1.12.qcow2";
#undef aos_cx_disk 
#define aos_cx_disk basedisk "/vmm/data/user_disks/irzan/images/aos-cx.qcow2";
#undef ubuntu_disk 
#define ubuntu_disk basedisk "/vmm/data/user_disks/irzan/images/ubuntu24.04.qcow2";
config "sw1" {
    bridge "mgmt"{};
    bridge "sw1ge4"{};
    bridge "sw1ge5"{};
    bridge "sw1ge6"{};
    bridge "ptp0"{};
    bridge "ptp1"{};
    bridge "ptp2"{};
    bridge "ptp3"{};
    bridge "sw2ge4"{};
    bridge "sw2ge5"{};
    bridge "sw2ge6"{};
    bridge "sw2ge7"{};
    bridge "ptp4"{};
    bridge "ptp5"{};
    bridge "sw3ge4"{};
    bridge "sw3ge5"{};
    bridge "sw3ge6"{};
    bridge "sw3ge7"{};
    bridge "reserved_bridge"{};
    
    vm "gw" {
       hostname "gw";
       gw_disk
       ncpus 2;
       memory 4096;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       setvar "attach_usb" "0";
       
       interface "em0" { bridge "external";};
       interface "em1" { bridge "mgmt";};
        
    };
    vm "sw1" {
       hostname "sw1";
       vjunos_switch_disk
       ncpus 4;
       memory 5120;
       setvar "+qemu_args" "-cpu host,+vmx -smbios type=1,product=VM-VEX";
       setvar "attach_usb" "0";
       
       interface "vio0" { bridge "mgmt";};
       interface "vio1" { bridge "ptp0";};
       interface "vio2" { bridge "ptp1";};
       interface "vio3" { bridge "ptp2";};
       interface "vio4" { bridge "ptp3";};
       interface "vio5" { bridge "sw1ge4";};
       interface "vio6" { bridge "sw1ge5";};
       interface "vio7" { bridge "sw1ge6";};
        
    };
    vm "sw2" {
       hostname "sw2";
       aos_cx_disk
       ncpus 2;
       memory 4096;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "attach_usb" "0";
       
       interface "vio0" { bridge "mgmt";};
       interface "vio1" { bridge "ptp0";};
       interface "vio2" { bridge "ptp1";};
       interface "vio3" { bridge "ptp4";};
       interface "vio4" { bridge "ptp5";};
       interface "vio5" { bridge "sw2ge4";};
       interface "vio6" { bridge "sw2ge5";};
       interface "vio7" { bridge "sw2ge6";};
       interface "vio8" { bridge "sw2ge7";};
        
    };
    vm "sw3" {
       hostname "sw3";
       aos_cx_disk
       ncpus 2;
       memory 4096;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "attach_usb" "0";
       
       interface "vio0" { bridge "mgmt";};
       interface "vio1" { bridge "ptp2";};
       interface "vio2" { bridge "ptp3";};
       interface "vio3" { bridge "ptp4";};
       interface "vio4" { bridge "ptp5";};
       interface "vio5" { bridge "sw3ge4";};
       interface "vio6" { bridge "sw3ge5";};
       interface "vio7" { bridge "sw3ge6";};
       interface "vio8" { bridge "sw3ge7";};
        
    };
    vm "svr1" {
       hostname "svr1";
       ubuntu_disk
       ncpus 2;
       memory 8192;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       setvar "attach_usb" "0";
       
       interface "em0" { bridge "sw1ge4";};
       interface "em1" { bridge "sw1ge5";};
        
    };
    vm "svr2" {
       hostname "svr2";
       ubuntu_disk
       ncpus 2;
       memory 8192;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       setvar "attach_usb" "0";
       
       interface "em0" { bridge "sw2ge4";};
       interface "em1" { bridge "sw2ge5";};
        
    };
    vm "svr3" {
       hostname "svr3";
       ubuntu_disk
       ncpus 2;
       memory 8192;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       setvar "attach_usb" "0";
       
       interface "em0" { bridge "sw3ge4";};
       interface "em1" { bridge "sw3ge5";};
        
    };
    vm "svr4" {
       hostname "svr4";
       ubuntu_disk
       ncpus 2;
       memory 8192;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       setvar "attach_usb" "0";
       
       interface "em0" { bridge "sw2ge6";};
       interface "em1" { bridge "sw3ge6";};
        
    };
    vm "client" {
       hostname "client";
       ubuntu_disk
       ncpus 8;
       memory 32768;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "attach_usb" "0";
       
       interface "em0" { bridge "mgmt";};
       interface "em1" { bridge "sw1ge6";};
       interface "em2" { bridge "sw2ge7";};
       interface "em3" { bridge "sw3ge7";};
        
    };
    
};
